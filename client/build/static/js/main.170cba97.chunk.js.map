{"version":3,"sources":["components/Header/Header.js","components/LoginForm/LoginForm.js","components/Admin/StudentAdmin.js","components/Home/Home.js","utils/PrivateRoute.js","App.js","index.js","components/Admin/SchoolAdmin.js","constants/apiConstants.js","Context/GVar.js"],"names":["withRouter","props","s","location","pathname","substring","length","charAt","toUpperCase","slice","className","to","console","log","onClick","localStorage","removeItem","ACCESS_TOKEN_NAME","history","push","renderLogout","useState","email","password","successMessage","state","setState","handleChange","e","target","id","value","prevState","redirectToHome","updateTitle","htmlFor","type","aria-describedby","placeholder","onChange","preventDefault","payload","process","axios","post","then","response","status","i","setItem","data","token","showError","code","catch","error","style","display","role","StudentAdmin","useContext","UserContext","fileHash","setFileHash","web3","account","contract","payment","SetPayment","balPaym","setBalPay","useEffect","a","window","ethereum","on","loadBlockChain","listenMMAccount","enable","Web3","eth","getAccounts","accounts","net","getId","networkId","networkData","ISA","networks","abi","address","Contract","alert","currentProvider","providers","HttpProvider","WEB3_PROVIDER","GetISADoc","methods","getStudentInfo","call","result","filename","handleDownloadDoc","fileName","fetch","blob","url","URL","createObjectURL","document","createElement","href","download","click","SignISA","storeFileHash","send","from","GetPaymentDetails","getPaymentDetails","MakePayment","event","tokenAbi","tokenabi","daiiToken","senderAddress","receiverAddress","balanceOf","str","utils","fromWei","transfer","toWei","err","res","makePayment","saveAsFileName","onSubmit","name","jwt","require","Home","title","getItem","val","verify","exact","path","component","SchoolAdmin","PrivateRoute","children","rest","render","App","updateErrorMessage","setWeb3","setContract","setAccount","studentId","setStudentId","Provider","ReactDOM","StrictMode","getElementById","fh","setFH","cert","setCert","acct","setAcct","amountRemain","setAmountR","monthsRemain","setMonthsR","ipfs","ipfsClient","host","port","protocol","apiPath","buffer","setbuffer","AddtoIPFS","add","hash","StoreStudentInfo","storeStudentInfo","StorePaymentTerms","StorePaymentDetails","RetrieveStudentInfo","key","VerifySignature","verifyFileHash","Certified","handleInputChange","file","files","reader","FileReader","readAsArrayBuffer","onloadend","Buffer","REACT_APP_SERVER_URL","createContext"],"mappings":"yMAuDeA,G,OAAAA,aAjDA,SAACC,GACZ,IAAoBC,EACC,kBADDA,EAIGD,EAAME,SAASC,SAASC,UAAU,EAAEJ,EAAME,SAASC,SAASE,WAFxEJ,EAAEK,OAAO,GAAGC,cAAgBN,EAAEO,MAAM,IAoB/C,MAjB+B,MAA5BR,EAAME,SAASC,UACN,cAiBR,gCAEA,qBAAKM,UAAU,SAAf,SACI,qBAAKA,UAAU,sDAAf,SACA,+BACI,6BAAI,cAAC,IAAD,CAAMC,GAAG,IAAT,oBACJ,6BAAI,cAAC,IAAD,CAAMA,GAAG,cAAT,4BACJ,6BAAI,cAAC,IAAD,CAAMA,GAAG,eAAT,6BACJ,6BAAI,cAAC,IAAD,CAAMA,GAAG,QAAT,4BAMP,8BA7BT,WAEI,GADAC,QAAQC,IAAI,YAAaZ,EAAME,SAASC,UACT,UAA5BH,EAAME,SAASC,SACd,OACI,qBAAKM,UAAU,UAAf,SACI,wBAAQA,UAAU,iBAAiBI,QAAS,kBAMxDC,aAAaC,WAAWC,UACxBhB,EAAMiB,QAAQC,KAAK,WAPP,sBA0BDC,Y,0CC0EJpB,mBAlHf,SAAmBC,GAAQ,IAAD,EACKoB,mBAAS,CAChCC,MAAQ,GACRC,SAAW,GACXC,eAAgB,OAJE,mBACfC,EADe,KACPC,EADO,KAMhBC,EAAe,SAACC,GAAO,IAAD,EACHA,EAAEC,OAAhBC,EADiB,EACjBA,GAAKC,EADY,EACZA,MACZL,GAAS,SAAAM,GAAS,kCACXA,GADW,kBAEbF,EAAMC,QAoDTE,EAAiB,WACnBhC,EAAMiC,YAAY,QAClBjC,EAAMiB,QAAQC,KAAK,UAMvB,OACI,sBAAKT,UAAU,iDAAf,UACI,iCACI,sBAAKA,UAAU,uBAAf,UACA,uBAAOyB,QAAQ,qBAAf,2BACA,uBAAOC,KAAK,QACL1B,UAAU,eACVoB,GAAG,QACHO,mBAAiB,YACjBC,YAAY,cACZP,MAAON,EAAMH,MACbiB,SAAUZ,IAEjB,uBAAOG,GAAG,YAAYpB,UAAU,uBAAhC,+DAEA,sBAAKA,UAAU,uBAAf,UACA,uBAAOyB,QAAQ,wBAAf,sBACA,uBAAOC,KAAK,WACL1B,UAAU,eACVoB,GAAG,WACHQ,YAAY,WACZP,MAAON,EAAMF,SACbgB,SAAUZ,OAGjB,qBAAKjB,UAAU,eAEf,wBACI0B,KAAK,SACL1B,UAAU,oBACVI,QApFU,SAACc,GACvBA,EAAEY,iBACF,IAAMC,EAAQ,CACV,MAAQhB,EAAMH,MACd,SAAWG,EAAMF,UAGrBX,QAAQC,IAAI,UAAW4B,GAKvB7B,QAAQC,IAAI,WAFO,yBAGnBD,QAAQC,IAAI,YAAa6B,oIAGxBC,IAAMC,KAAK,mCAAoCH,GAE3CI,MAAK,SAAUC,GAEZ,GADAlC,QAAQC,IAAI,WAAYiC,GACD,MAApBA,EAASC,OAAe,CAQvB,IAAI,IAAIC,KAPRtB,GAAS,SAAAM,GAAS,kCACXA,GADW,IAEd,eAAmB,oDAEvBjB,aAAakC,QAAQhC,IAAkB6B,EAASI,KAAKC,OACrDvC,QAAQC,IAAI,SAASI,IAAkB6B,EAASI,KAAKC,OAExCpC,aACTH,QAAQC,IAAImC,EAAI,MAAQjC,aAAaiC,IAGzCf,IACAhC,EAAMmD,UAAU,WAEM,MAAlBN,EAASO,KACbpD,EAAMmD,UAAU,sCAGhBnD,EAAMmD,UAAU,+BAGvBE,OAAM,SAAUC,GACb3C,QAAQC,IAAI0C,OAsCZ,uBAMJ,qBAAK7C,UAAU,2BAA2B8C,MAAO,CAACC,QAAShC,EAAMD,eAAiB,QAAU,QAAUkC,KAAK,QAA3G,SACKjC,EAAMD,iBAEX,sBAAKd,UAAU,kBAAf,UACI,0DACA,sBAAMA,UAAU,YAAYI,QAAS,kBAzC7Cb,EAAMiB,QAAQC,KAAK,kBACnBlB,EAAMiC,YAAY,aAwCV,+B,2EC6EDyB,EAtLM,WAAO,IAAD,EACOC,qBAAWC,KAApCC,EADkB,EAClBA,SAAUC,EADQ,EACRA,YACVC,EAAQJ,qBAAWC,KAAnBG,KACAC,EAAWL,qBAAWC,KAAtBI,QACAC,EAAYN,qBAAWC,KAAvBK,SAJkB,EAOK7C,mBAAS,GAPd,mBAOlB8C,EAPkB,KAOTC,EAPS,OAQI/C,qBARJ,mBAQlBgD,EARkB,KAQTC,EARS,KAYtBC,qBAAU,WAAM,4CACb,sBAAAC,EAAA,sDACAC,OAAOC,SAASC,GAAG,kBAAnB,sBAAsC,sBAAAH,EAAA,sDACjB,IAAdR,EAAKA,MACRY,IAFkC,4CADtC,4CADa,uBAAC,WAAD,wBAQbC,KACD,IAEH,IAAMD,EAAc,uCAAI,sCAAAJ,EAAA,yDAEhBE,EAAWD,OAAOC,SACtBV,EAAOS,OAAOT,KACdpD,QAAQC,IAAI,SAAWmD,GACC,qBAAbU,EALS,iCAMVA,EAASI,SANC,cAOhBd,EAAO,IAAIe,IAAKL,GAPA,SAQOV,EAAKgB,IAAIC,cARhB,cAQVC,EARU,OAShBjB,EAAUiB,EAAS,GATH,UAUQlB,EAAKgB,IAAIG,IAAIC,QAVrB,WAUVC,EAVU,SAWVC,EAAcC,EAAIC,SAASH,IAXjB,wBAaRI,EAAMF,EAAIE,IACVC,EAAUJ,EAAYI,QAdd,UAeC,IAAI1B,EAAKgB,IAAIW,SAASF,EAAIC,GAf3B,QAehBxB,EAfgB,OAgBdtD,QAAQC,IAAI,gBAAiBqD,GAhBf,wBAkBdO,OAAOmB,MAAM,uDAlBC,gCAqBhB5B,EADuB,qBAATA,EACNe,IAAKf,EAAK6B,iBAET,IAAId,IAAK,IAAIA,IAAKe,UAAUC,aAAarD,mIAAYsD,gBAvB9C,4CAAJ,qDA2BdC,EAAS,uCAAG,8BAAAzB,EAAA,sEAERI,IAFQ,uBAIKV,EAASgC,QAAQC,eAAelC,GAASmC,OAJ9C,OAIVC,EAJU,OAKJ,EACVzF,QAAQC,IAAI,SAAUwF,EADZ,IAEVtC,EAAYsC,EAFF,IAGVzF,QAAQC,IAAI,eAAiBiD,GACzBwC,EAAW,+BAA+BD,EAJpC,GAKVE,EAAkBD,GAVJ,4CAAH,qDAaTC,EAAoB,SAACC,GAEvB5F,QAAQC,IAAI2F,EAAU1C,GAClB2C,MAAMD,GACD3D,MAAK,SAAAC,GACFA,EAAS4D,OAAO7D,MAAK,SAAA6D,GACjB,IAAIC,EAAMlC,OAAOmC,IAAIC,gBAAgBH,GACjClC,EAAIsC,SAASC,cAAc,KAC/BvC,EAAEwC,KAAOL,EACTnC,EAAEyC,SAAW,eACbzC,EAAE0C,eAMhBC,EAAO,uCAAG,4BAAA3C,EAAA,sEAENI,IAFM,cAGZhE,QAAQC,IAAI,mBAAoBiD,EAAUG,GAH9B,SAIOC,EAASgC,QAAQC,eAAelC,GAASmC,OAJhD,cAIRC,EAJQ,OAMF,EACVzF,QAAQC,IAAI,SAAUwF,EADZ,IANE,UAUNnC,EAASgC,QAAQkB,cAActD,GAAUuD,KAAK,CAACC,KAAMrD,IAV/C,4CAAH,qDAaPsD,EAAiB,uCAAG,WAAM3F,GAAN,eAAA4C,EAAA,6DACtB5C,EAAEY,iBADoB,SAEhBoC,IAFgB,cAGtBhE,QAAQC,IAAI,WAAYqD,EAAUD,GAHZ,SAILC,EAASgC,QAAQsB,kBAAkBvD,GAASmC,OAJvC,OAIlBlD,EAJkB,OAKZ,EACVoB,GAAU,SAAAD,GAAO,OAAUnB,EADjB,MALY,2CAAH,sDASjBuE,EAAW,uCAAG,WAAOC,GAAP,2BAAAlD,EAAA,6DAChBkD,EAAMlF,iBACAmF,EAAWC,EACblD,EAAWD,OAAOC,SACtBV,EAAOS,OAAOT,KAJE,SAKVU,EAASI,SALC,cAMhBd,EAAO,IAAIe,IAAKL,GAChB9D,QAAQC,IAAI,SAAWmD,GACF,6CARL,UASQ,IAAIA,EAAKgB,IAAIW,SAASgC,EADzB,8CARL,eASVE,EATU,OAWVC,EAAe,6CAEfC,EAAkB,6CAbR,UAeAF,EAAU3B,QAAQ8B,UAAUF,GAAe1B,OAf3C,eAeZlD,EAfY,OAgBhBtC,QAAQC,IAAI,SAAUqC,GAClB+E,EAAMjE,EAAKkE,MAAMC,QAAQjF,GACzBtC,QAAQC,IAAI,QAASoH,GAEzBrH,QAAQC,IAAI,YAAYsD,GACxB0D,EAAU3B,QACTkC,SAASL,EAAiB/D,EAAKkE,MAAMG,MAAMlE,IAC3CkD,KAAK,CAAEC,KAAMQ,IAAiB,SAAUQ,EAAKC,GACxCD,EACF1H,QAAQC,IAAI,mBAAoByH,GAGlC1H,QAAQC,IAAI,4BAA8B0H,MA5B5B,UA+BV3D,IA/BU,yBAgCVV,EAASgC,QAAQsC,YAAYrE,GAASkD,KAAK,CAACC,KAAKrD,IAhCvC,yBAiCIC,EAjCJ,2DAAH,sDAmDjB,OACI,oCACI,oCACI,wBAAQpD,QAASmF,EAAjB,8BACA,mBAAGe,KAAI,sCAAiClD,GACpCmD,SAAU,sCAA+BnD,GAAW2E,oBAG5D,oCACI,wBAAQ3H,QAASyG,EAAjB,kCACA,mDAAsBlD,QAE1B,kCACI,wBAAQvD,QAASqG,EAAjB,yBAEJ,iCACI,uBAAMuB,SAAUjB,EAAhB,UACA,kDACI,uBAAOrF,KAAK,OAAOuG,KAAK,SAASrG,YAAa,MAAMC,SAhC1C,SAAAX,GACtBA,EAAEY,iBACF4B,EAAWxC,EAAEC,OAAOE,aAgCZ,uBAAOK,KAAK,SAASL,MAAM,gBAG/B,qBAAKrB,UAAU,UAAf,SACQ,wBAAQA,UAAU,iBAAiBI,QAAS,WAhCxDC,aAAaC,WAAWC,MAgCZ,0BCjLd2H,EAAMC,EAAQ,MA+DL7I,eA7DF,SAAP8I,EAAQ7I,GAgDV,OA9CAsE,qBAAU,WACR3D,QAAQC,IAAI,gBAAiBZ,EAAM8I,OAGjCnI,QAAQC,IADa,6BAIrBD,QAAQC,IAAI,+BAAgCI,KAK1C,IAAMkC,EAAQpC,aAAaiI,QAAQ/H,KAEnC,GADAL,QAAQC,IAAIsC,GACPA,EAKD,IACF,IAAM8F,EAAML,EAAIM,OAAO/F,EAAO,gBAC9BvC,QAAQC,IAAI,MAAOoI,GAGnB,MAAOrH,GACPhB,QAAQ2C,MAAM3B,QAVdhB,QAAQC,IAAI,yBA4BpBZ,EAAMiB,QAAQC,KAAK,aAIjB,iCACA,qBAAKT,UAAU,WACb,eAAC,IAAD,WACI,cAAC,IAAD,CAAOyI,OAAK,EAACC,KAAM,IAAIC,UAAWP,IAClC,cAAC,IAAD,CAAOK,OAAK,EAACC,KAAM,eAAeC,UAAWC,MAC7C,cAAC,IAAD,CAAOH,OAAK,EAACC,KAAM,gBAAgBC,UAAW1F,IAC9C,cAAC,IAAD,CAAOwF,OAAK,EAACC,KAAM,SAASC,UAAWpJ,EAAM8I,iB,SCvC1CQ,MAvBf,YAA8C,IAAtBC,EAAqB,EAArBA,SAAaC,EAAQ,4BAIzC,OAFF7I,QAAQC,IAAI,WAAY2I,GACxB5I,QAAQC,IAAI,UAAW4I,GAEnB,cAAC,IAAD,2BACMA,GADN,IAEEC,OAAQ,gBAAGvJ,EAAH,EAAGA,SAAH,OACNY,aAAaiI,QAAQ/H,KACnBuI,EAEA,cAAC,IAAD,CACE7I,GAAI,CACFP,SAAU,SACVqB,MAAO,CAAE6F,KAAMnH,WCuChBwJ,EAxCF,WAAM,IAAD,EACatI,mBAAS,MADtB,mBACT0H,EADS,KACF7G,EADE,OAE2Bb,mBAAS,MAFpC,mBAEKuI,GAFL,aAIcvI,mBAAS,GAJvB,mBAIXyC,EAJW,KAIDC,EAJC,OAKM1C,mBAAS,CAAC2C,KAAK,IALrB,mBAKXA,EALW,KAKL6F,EALK,OAMcxI,mBAAS,CAAC6C,SAAS,IANjC,mBAMXA,EANW,KAMD4F,EANC,OAOYzI,mBAAS,GAPrB,mBAOX4C,EAPW,KAOF8F,EAPE,OAQiB1I,mBAAS,GAR1B,mBAQX2I,EARW,KAQAC,EARA,KAWhB,OACE,cAAC,IAAD,UACA,sBAAKvJ,UAAU,MAAf,UACE,cAAC,EAAD,CAAQqI,MAAOA,IACb,qBAAKrI,UAAU,kDAAf,SACE,cAAC,IAAD,UACI,eAAC,IAAYwJ,SAAb,CAAsBnI,MAAO,CAAC+B,WAAUC,cAAaC,OAAM6F,UACzD3F,WAAU4F,cAAa7F,UAAS8F,aAAYC,YAAWC,gBADzD,UAEM,cAAC,IAAD,CAAOb,KAAK,SAAZ,SACE,cAAC,EAAD,CAAWhG,UAAWwG,EAAoB1H,YAAaA,MAEzD,cAAC,EAAD,CAAckH,KAAK,QAAnB,SACE,cAAC,EAAD,MAEF,cAAC,EAAD,CAAcA,KAAK,eAAnB,SACE,cAACE,EAAA,EAAD,MAEF,cAAC,EAAD,CAAcF,KAAK,gBAAnB,SACE,cAAC,EAAD,mBCtCtBe,IAAST,OACL,cAAC,IAAMU,WAAP,UACI,cAAC,IAAD,UACI,cAAC,EAAD,QAGRtD,SAASuD,eAAe,U,wKCsMbf,IA5MK,WAAO,IAAD,EACQ1F,qBAAWC,KAApCC,EADiB,EACjBA,SAAUC,EADO,EACPA,YACVC,EAAQJ,qBAAWC,KAAnBG,KACAC,EAAWL,qBAAWC,KAAtBI,QACAC,EAAYN,qBAAWC,KAAvBK,SAJiB,EAOJ7C,mBAAS,GAPL,mBAOjBiJ,EAPiB,KAObC,EAPa,OAQClJ,mBAAS,OARV,mBAQjBmJ,EARiB,KAQXC,EARW,OASApJ,qBATA,mBASjBqJ,EATiB,KASXC,EATW,OAUWtJ,mBAAS,GAVpB,mBAUjBuJ,EAViB,KAUHC,EAVG,OAWWxJ,mBAAS,GAXpB,mBAWjByJ,EAXiB,KAWHC,EAXG,KAchBC,EADanC,EAAS,IACfoC,CAAW,CAAEC,KAAM,iBAAkBC,KAAK,KAAKC,SAAS,QAASC,QAAQ,YAdhE,EAiBIhK,mBAAS,IAjBb,mBAiBjBiK,EAjBiB,KAiBTC,EAjBS,KA+BhBC,EAAS,uCAAG,WAAO9D,GAAP,SAAAlD,EAAA,6DACdkD,EAAMlF,iBADQ,SAEJwI,EAAKS,IAAIH,GAAS,SAAC/H,EAAO8C,GAChCiE,EAAOjE,EAAO,GAAGqF,KACjB9K,QAAQC,IAAK,kBAAmByJ,GAC7B/G,GACC3C,QAAQ2C,MAAMA,MANR,2CAAH,sDAYfgB,qBAAU,WAAM,4CACZ,sBAAAC,EAAA,sDACAC,OAAOC,SAASC,GAAG,kBAAnB,sBAAsC,sBAAAH,EAAA,yDACjB,IAAdR,EAAKA,KAD0B,gCAExBY,IAFwB,4CADtC,4CADY,uBAAC,WAAD,wBAQZC,KACD,IAGH,IAAMD,EAAc,uCAAI,sCAAAJ,EAAA,yDAEhBE,EAAWD,OAAOC,SAEtBV,EAAOS,OAAOT,KACdpD,QAAQC,IAAI,SAAWmD,GACC,qBAAbU,EANS,iCAOVA,EAASI,SAPC,cAQhBd,EAAO,IAAIe,IAAKL,GARA,SASOV,EAAKgB,IAAIC,cAThB,cASVC,EATU,OAUhBjB,EAAUiB,EAAS,GAVH,UAWQlB,EAAKgB,IAAIG,IAAIC,QAXrB,WAWVC,EAXU,SAYVC,EAAcC,EAAIC,SAASH,IAZjB,wBAcRI,EAAMF,EAAIE,IACVC,EAAUJ,EAAYI,QAfd,UAgBC,IAAI1B,EAAKgB,IAAIW,SAASF,EAAIC,GAhB3B,QAgBhBxB,EAhBgB,OAiBdtD,QAAQC,IAAI,gBAAiBqD,GAjBf,wBAmBdO,OAAOmB,MAAM,uDAnBC,gCAsBhB5B,EADuB,qBAATA,EACNe,IAAKf,EAAK6B,iBAET,IAAId,IAAK,IAAIA,IAAKe,UAAUC,aAAarD,mIAAYsD,gBAxB9C,4CAAJ,qDA4Bd2F,EAAgB,uCAAG,sBAAAnH,EAAA,sEAGfI,IAHe,cAIrBhE,QAAQC,IAAImD,EAAME,EAAUD,GAJP,SAMfC,EAASgC,QAAQ0F,iBAAiB3H,EAAQH,GAAUuD,KAAK,CAACC,KAAKrD,IANhD,2CAAH,qDAgBhB4H,EAAiB,uCAAG,WAAOjK,GAAP,SAAA4C,EAAA,6DACtB5C,EAAEY,iBADoB,SAEhBoC,IAFgB,cAGtBhE,QAAQC,IAAIoD,EAASC,GACrBtD,QAAQC,IAAI+J,EAAaE,GAJH,SAKhB5G,EAASgC,QAAQ4F,oBAAoB7H,EAAQ2G,EAAaE,GAAczD,KAAK,CAACC,KAAKrD,IALnE,2CAAH,sDAQjB8H,EAAmB,uCAAG,8BAAAvH,EAAA,sEAElBI,IAFkB,cAKxBhE,QAAQC,IAAI,cAAeoD,GALH,SAMPC,EAASgC,QAAQC,eAAelC,GAASmC,OANlC,OAMpBlD,EANoB,OAOpB8I,EAAI,EACRrB,GAAQ,SAAAD,GAAI,OAAOxH,EAAK8I,MACxBA,EAAM,EACNzB,GAAM,SAAAD,GAAE,OAAKpH,EAAK8I,MAClBjI,GAAY,SAAAD,GAAQ,OAAWwG,KAC/B1J,QAAQC,IAAI,sBAAuBqC,EAAK,IACxCtC,QAAQC,IAAI,qBAAsB6J,GAClC9J,QAAQC,IAAI,mBAAoByJ,GAChC1J,QAAQC,IAAI,yBAA0BiD,GAfd,4CAAH,qDAkBnBmI,EAAe,uCAAG,WAAOvE,GAAP,eAAAlD,EAAA,6DACpBkD,EAAMlF,iBADc,SAGduJ,IAHc,cAIpBnL,QAAQC,IAAI,mBAAoBoD,EAASC,EAASJ,GAJ9B,SAKEI,EAASgC,QAAQgG,eAAejI,EAAQH,GAAUsC,OALpD,OAKhB+F,EALgB,OAMpBvL,QAAQC,IAAI,aAAcsL,GAC1B1B,GAAQ,SAAAD,GAAI,MAAO,MACf2B,EAAU,GACV1B,GAAQ,SAAAD,GAAI,OAAO,KACnB5J,QAAQC,IAAI,qBAER4J,GAAQ,SAAAD,GAAI,OAAO,KAC3B5J,QAAQC,IAAI,QAAS2J,GAbD,4CAAH,sDAiBf4B,EAAoB,SAACxK,GACvBA,EAAEY,iBACoB,WAAlBZ,EAAEC,OAAO8G,MACTkC,EAAWjJ,EAAEC,OAAOE,OACpBnB,QAAQC,IAAI,cAAc+J,KAE1BG,EAAWnJ,EAAEC,OAAOE,OACpBnB,QAAQC,IAAI,cAAciK,KAYlC,OAGA,cADA,CACA,qBACI,wDAEI,uBAAMpC,SAAU8C,EAAhB,UACI,uBAAOpJ,KAAK,OAAQG,SApJZ,SAACmF,GACjBA,EAAMlF,iBACN,IAAM6J,EAAO3E,EAAM7F,OAAOyK,MAAM,GAC1BC,EAAS,IAAI9H,OAAO+H,WAC1BD,EAAOE,kBAAkBJ,GACzBE,EAAOG,UAAY,WACfnB,GAAU,SAAAD,GAAM,OAASqB,EAAOJ,EAAOlG,eA+InC,uBAAOjE,KAAK,SAAUL,MAAM,0BAGpC,kCACI,wBAAQjB,QAAS6K,EAAjB,0CAGJ,oCACI,wBAAQ7K,QAASiL,EAAjB,8BACA,kDAAqBrB,QAGzB,kCACI,uBAAMhC,SAAUmD,EAAhB,UACI,2DACI,uBAAOzJ,KAAK,OAAOuG,KAAK,SAASrG,YAAa,OAAOC,SAAU6J,IAC/D,uBAAOhK,KAAK,OAAOuG,KAAK,SAASrG,YAAY,KAAKC,SAAU6J,OAEhE,uBAAOhK,KAAK,SAASL,MAAM,gBAInC,mCACI,wBAAQjB,QAASmL,EAAjB,8BACA,+CAAkBzB,QAGlB,qBAAK9J,UAAU,UAAf,SACQ,wBAAQA,UAAU,iBAAiBI,QAAS,WAzCxDC,aAAaC,WAAWC,MAyCZ,4B,4EC5MpB,kCAA4ByB,mIAAYkK,qBAAjC,IACM3L,EAAoB,sB,klGCDjC,6CAEc4C,EAAcgJ,2B","file":"static/js/main.170cba97.chunk.js","sourcesContent":["import React from 'react';\r\nimport { withRouter, Link } from \"react-router-dom\";\r\nimport { ACCESS_TOKEN_NAME } from '../../constants/apiConstants';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\n\r\n\r\nconst Header = (props) => {\r\n    const capitalize = (s) => {\r\n        if (typeof s !== 'string') return ''\r\n        return s.charAt(0).toUpperCase() + s.slice(1)\r\n    }\r\n    let title = capitalize(props.location.pathname.substring(1,props.location.pathname.length))\r\n    if(props.location.pathname === '/') {\r\n        title = 'Welcome!!!!'\r\n    }\r\n    function renderLogout() {\r\n        console.log(\"pathname \", props.location.pathname)\r\n        if(props.location.pathname === '/home'){\r\n            return(\r\n                <div className=\"ml-auto\">\r\n                    <button className=\"btn btn-danger\" onClick={() => handleLogout()}>Logout</button>\r\n                </div>\r\n            )\r\n        }\r\n    }\r\n    function handleLogout() {\r\n        localStorage.removeItem(ACCESS_TOKEN_NAME)\r\n        props.history.push('/login')\r\n    }\r\n    return(\r\n        <div>\r\n        {/* <nav className=\"navbar navbar-dark bg-secondary\"> */}\r\n        <nav className=\"navBar\">\r\n            <div className=\"row col-12 d-flex justify-content-center text-white\">\r\n            <ul>\r\n                <li><Link to='/'>Home</Link></li>\r\n                <li><Link to='SchoolAdmin'>School Admin</Link></li>\r\n                <li><Link to='StudentAdmin'>Student Admin</Link></li>\r\n                <li><Link to='login'>Login</Link></li>\r\n            </ul>\r\n\r\n            </div>\r\n\r\n        </nav>\r\n             <div>\r\n                  {/* <span className=\"h3\">{props.title || title}</span> */}\r\n                  {renderLogout()}             \r\n             </div>\r\n\r\n        </div>\r\n\r\n\r\n \r\n    )\r\n}\r\nexport default withRouter(Header);","import React, {useState} from 'react';\r\nimport axios from 'axios';\r\nimport './LoginForm.css';\r\nimport {API_BASE_URL, ACCESS_TOKEN_NAME} from '../../constants/apiConstants';\r\nimport { withRouter } from \"react-router-dom\";\r\n\r\nfunction LoginForm(props) {\r\n    const [state , setState] = useState({\r\n        email : \"\",\r\n        password : \"\",\r\n        successMessage: null\r\n    })\r\n    const handleChange = (e) => {\r\n        const {id , value} = e.target   \r\n        setState(prevState => ({\r\n            ...prevState,\r\n            [id] : value\r\n        }))\r\n\r\n        // console.log('id, value' , id, value)\r\n    }\r\n\r\n    const handleSubmitClick = (e) => {\r\n        e.preventDefault();\r\n        const payload={\r\n            \"email\":state.email,\r\n            \"password\":state.password,\r\n        }\r\n\r\n        console.log('payload', payload)\r\n\r\n        // let API_BASE_URL = \"https://nv1.herokuapp.com\"\r\n        let API_BASE_URL = \"http://localhost:5000\"\r\n\r\n        console.log('API BASE', API_BASE_URL )\r\n        console.log('node .env', process.env )\r\n\r\n        // axios.post(API_BASE_URL+'/user/login', payload)\r\n         axios.post('http://localhost:5000/user/login', payload)\r\n        //  axios.post('https://nv1.herokuapp.com/user/login', payload)\r\n            .then(function (response) {\r\n                console.log('response', response)\r\n                if(response.status === 200){\r\n                    setState(prevState => ({\r\n                        ...prevState,\r\n                        'successMessage' : 'Login successful. Redirecting to home page..'\r\n                    }))\r\n                    localStorage.setItem(ACCESS_TOKEN_NAME,response.data.token);\r\n                    console.log('tokens',ACCESS_TOKEN_NAME,response.data.token)\r\n                    \r\n                    for(var i in localStorage) {\r\n                        console.log(i + ' = ' + localStorage[i]);\r\n                    }\r\n                                                    \r\n                    redirectToHome();\r\n                    props.showError(null)\r\n                }\r\n                else if(response.code === 204){\r\n                    props.showError(\"Username and password do not match\");\r\n                }\r\n                else{\r\n                    props.showError(\"Username does not exists\");\r\n                }\r\n            })\r\n            .catch(function (error) {\r\n                console.log(error);\r\n            });\r\n    }\r\n    const redirectToHome = () => {\r\n        props.updateTitle('Home')\r\n        props.history.push('/home');\r\n    }\r\n    const redirectToRegister = () => {\r\n        props.history.push('/register'); \r\n        props.updateTitle('Register');\r\n    }\r\n    return(\r\n        <div className=\"card col-12 col-lg-4 login-card mt-2 hv-center\">\r\n            <form>\r\n                <div className=\"form-group text-left\">\r\n                <label htmlFor=\"exampleInputEmail1\">Email address</label>\r\n                <input type=\"email\" \r\n                       className=\"form-control\" \r\n                       id=\"email\" \r\n                       aria-describedby=\"emailHelp\" \r\n                       placeholder=\"Enter email\" \r\n                       value={state.email}\r\n                       onChange={handleChange}\r\n                />\r\n                <small id=\"emailHelp\" className=\"form-text text-muted\">We'll never share your email with anyone else.</small>\r\n                </div>\r\n                <div className=\"form-group text-left\">\r\n                <label htmlFor=\"exampleInputPassword1\">Password</label>\r\n                <input type=\"password\" \r\n                       className=\"form-control\" \r\n                       id=\"password\" \r\n                       placeholder=\"Password\"\r\n                       value={state.password}\r\n                       onChange={handleChange} \r\n                />\r\n                </div>\r\n                <div className=\"form-check\">\r\n                </div>\r\n                <button \r\n                    type=\"submit\" \r\n                    className=\"btn btn-secondary\"\r\n                    onClick={handleSubmitClick}\r\n                >Submit</button>\r\n            </form>\r\n            <div className=\"alert alert-success mt-2\" style={{display: state.successMessage ? 'block' : 'none' }} role=\"alert\">\r\n                {state.successMessage}\r\n            </div>\r\n            <div className=\"registerMessage\">\r\n                <span>Dont have an account? </span>\r\n                <span className=\"loginText\" onClick={() => redirectToRegister()}>Register</span> \r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default withRouter(LoginForm);","import React, { useState, useEffect, useContext} from 'react';\r\nimport '../../App.css';\r\nimport {UserContext} from '../../Context/GVar.js';\r\nimport ISA from '../../abis/ISA.json'\r\nimport Web3 from 'web3'\r\nimport {API_BASE_URL, ACCESS_TOKEN_NAME} from '../../constants/apiConstants';\r\nimport tokenabi from './tokenabi.json'\r\n\r\n\r\nconst StudentAdmin = () => {\r\n    let {fileHash, setFileHash} = useContext(UserContext)\r\n    let {web3} = useContext(UserContext)\r\n    let {account} = useContext(UserContext)\r\n    let {contract} = useContext(UserContext)\r\n\r\n  //local states\r\n    let [payment, SetPayment] = useState(0)\r\n    let [balPaym, setBalPay] = useState()\r\n\r\n\r\n     // listen to change of metamask account \r\n     useEffect(() => {\r\n        async function listenMMAccount() {\r\n        window.ethereum.on(\"accountsChanged\", async function() {\r\n            if(web3.web3 !== 1) {    // already initiated Web3 & Blockchain connection\r\n            loadBlockChain()\r\n            } \r\n        });\r\n        }\r\n        listenMMAccount();\r\n    }, []); \r\n\r\n    const loadBlockChain =  async () => {\r\n        // event.preventDefault()\r\n        let ethereum = window.ethereum;\r\n        web3 = window.web3;\r\n        console.log(\"w3--- \",  web3)\r\n        if (typeof ethereum !== 'undefined') {\r\n            await ethereum.enable();\r\n            web3 = new Web3(ethereum)\r\n            const accounts = await web3.eth.getAccounts()\r\n            account = accounts[0]\r\n            const networkId = await web3.eth.net.getId()\r\n            const networkData = ISA.networks[networkId]\r\n            if(networkData){\r\n              const abi = ISA.abi\r\n              const address = networkData.address\r\n            contract = await new web3.eth.Contract(abi,address)\r\n              console.log('contract===  ', contract)\r\n            } else {\r\n              window.alert('smart contract not deployed to the detected network')\r\n            }\r\n        } else if (typeof web3 !== 'undefined') {\r\n            web3 =  Web3(web3.currentProvider)\r\n          } else {\r\n              web3 = new Web3(new Web3.providers.HttpProvider(process.env.WEB3_PROVIDER))\r\n            }\r\n      }\r\n\r\n    const GetISADoc = async () => {\r\n        // e.preventDefault()\r\n        await loadBlockChain()\r\n        // get IPFS docu for cross checking by Student\r\n        let result = await contract.methods.getStudentInfo(account).call()\r\n        let key = 2\r\n        console.log('hash  ', result[key])        \r\n        setFileHash(result[key]) \r\n        console.log('filehash ===' , fileHash)       \r\n        let filename = \"https://ipfs.infura.io/ipfs/\"+result[key]\r\n        handleDownloadDoc(filename)\r\n    }\r\n\r\n    const handleDownloadDoc = (fileName) => {\r\n        // Downloads the file\r\n        console.log(fileName, fileHash)\r\n            fetch(fileName)\r\n                .then(response => {\r\n                    response.blob().then(blob => {\r\n                        let url = window.URL.createObjectURL(blob);\r\n                        let a = document.createElement('a');\r\n                        a.href = url;\r\n                        a.download = 'ISA Document';\r\n                        a.click();\r\n                    });\r\n                    //window.location.href = response.url;\r\n            });\r\n        }\r\n    \r\n    const SignISA = async () => {\r\n        // event.preventDefault\r\n        await loadBlockChain()\r\n        console.log(\"fileHash account\", fileHash, account)\r\n        let result = await contract.methods.getStudentInfo(account).call()\r\n\r\n        let key = 2\r\n        console.log('hash  ', result[key])\r\n        \r\n        // Sign into SC\r\n        await contract.methods.storeFileHash(fileHash).send({from: account})\r\n    }\r\n\r\n    const GetPaymentDetails = async(e) => {\r\n        e.preventDefault()\r\n        await loadBlockChain()\r\n        console.log('contract', contract, account)\r\n        let data = await contract.methods.getPaymentDetails(account).call()\r\n        let key = 0\r\n        setBalPay(balPaym=>balPaym=data[key])\r\n    }\r\n\r\n    const MakePayment = async (event) => {\r\n        event.preventDefault()\r\n        const tokenAbi = tokenabi;\r\n        let ethereum = window.ethereum;\r\n        web3 = window.web3;\r\n        await ethereum.enable();\r\n        web3 = new Web3(ethereum)\r\n        console.log(\"w3--- \",  web3)\r\n        const contractAddr = '0x5279c92BFCa9bA98650635E96B14Ec17b8AD39A7'\r\n        const daiiToken = await new web3.eth.Contract(tokenAbi, contractAddr)\r\n        // console.log('daiiToken ', daiiToken)\r\n        const senderAddress ='0x2a78a2a62dB7D210Ef33285bF9331D6a28e37ADa'\r\n\r\n        const receiverAddress = '0x1557804A250Be63F2E0E6D0B13c33da84CC4eF99'\r\n\r\n        let data =await daiiToken.methods.balanceOf(senderAddress).call()\r\n        console.log('data  ', data)\r\n        var str = web3.utils.fromWei(data);\r\n            console.log('str  ', str)\r\n\r\n        console.log('payment  ',payment)\r\n        daiiToken.methods\r\n        .transfer(receiverAddress, web3.utils.toWei(payment))\r\n        .send({ from: senderAddress }, function (err, res) {\r\n          if (err) {\r\n            console.log(\"An error occured\", err)\r\n            return\r\n          }\r\n          console.log(\"Hash of the transaction: \" + res)\r\n        })\r\n\r\n        await loadBlockChain()\r\n        await contract.methods.makePayment(payment).send({from:account})\r\n        let balance = await contract\r\n\r\n    }\r\n\r\n    const handleInputChange = e => {\r\n        e.preventDefault()\r\n        SetPayment(e.target.value)\r\n    }\r\n\r\n    function handleLogout() {\r\n        localStorage.removeItem(ACCESS_TOKEN_NAME)\r\n        // history.pushState({pathname: '/login'})\r\n        // props.history.push('/login')\r\n    }\r\n\r\n \r\n\r\n\r\n    return(\r\n        <wrapper>\r\n            <article>\r\n                <button onClick={GetISADoc}>Get ISA document</button>\r\n                <a href={`https://ipfs.infura.io/ipfs/${fileHash}`}\r\n                    download={`https://ipfs.infura.io/ipfs/${fileHash}`.saveAsFileName}>\r\n                </a>\r\n            </article>\r\n            <article>\r\n                <button onClick={GetPaymentDetails}>Get Payment Details </button>\r\n                <p>Balance Payments: {balPaym}</p>\r\n            </article>\r\n            <article>\r\n                <button onClick={SignISA}>Sign ISA </button>        \r\n            </article>\r\n            <footer>\r\n                <form onSubmit={MakePayment}>\r\n                <label> Make Payment\r\n                    <input type='text' name=\"amount\" placeholder= \"100\" onChange={handleInputChange} />\r\n                </label>\r\n                <input type='submit' value=\"Submit\" />\r\n                </form>\r\n            </footer>\r\n            <div className=\"ml-auto\">\r\n                    <button className=\"btn btn-danger\" onClick={() => handleLogout()}>Logout</button>\r\n            </div>\r\n\r\n        </wrapper>\r\n    )   \r\n}\r\nexport default StudentAdmin","import React,{ useEffect } from 'react';\r\nimport { withRouter, Switch, Route } from 'react-router-dom';\r\nimport { ACCESS_TOKEN_NAME, API_BASE_URL } from '../../constants/apiConstants';\r\nimport SchoolAdmin from '../Admin/SchoolAdmin'\r\nimport StudentAdmin from '../Admin/StudentAdmin'\r\nimport '../../App.css';\r\nimport axios from 'axios'\r\n\r\nconst jwt = require(\"jsonwebtoken\");\r\n\r\nconst Home = (props) => {\r\n\r\n    useEffect(() => {\r\n      console.log('at Home comp ', props.title)\r\n\r\n        const API_BASE_URL = 'https://nv1.herokuapp.com'\r\n        console.log(API_BASE_URL)\r\n\r\n\r\n        console.log('at home  : access token name', ACCESS_TOKEN_NAME)\r\n        // axios.get(API_BASE_URL+'/user/me', { headers: { 'token': localStorage.getItem(ACCESS_TOKEN_NAME) }})\r\n        // axios.get(API_BASE_URL +'/user', { headers: { 'token': localStorage.getItem(ACCESS_TOKEN_NAME) }})\r\n\r\n        // testing\r\n          const token = localStorage.getItem(ACCESS_TOKEN_NAME) ;\r\n          console.log(token)\r\n          if (!token) { \r\n            console.log(\"Authentication Failed\" )\r\n            redirectToLogin()\r\n          }\r\n          else {\r\n              try {\r\n            const val = jwt.verify(token, \"randomString\");\r\n            console.log('val', val)\r\n            // req.user = val.user;\r\n            // next();\r\n          } catch (e) {\r\n            console.error(e);\r\n          }\r\n          }\r\n        // testing   :  axios.post  not working as planned\r\n\r\n        // axios.post(API_BASE_URL +'/user', { headers: { 'token': localStorage.getItem(ACCESS_TOKEN_NAME) }})\r\n        // .then(function (response) {\r\n        //     if(response.status !== 200){\r\n        //       redirectToLogin()\r\n        //     }\r\n        // })\r\n        // .catch(function (error) {\r\n        //   redirectToLogin()\r\n        // });\r\n\r\n      })\r\n\r\n    function redirectToLogin() {\r\n    props.history.push('/login');\r\n    }\r\n\r\n    return(\r\n      <main>\r\n      <div className=\"header\"></div>\r\n        <Switch>\r\n            <Route exact path ='/' component={Home} />\r\n            <Route exact path ='/SchoolAdmin' component={SchoolAdmin} />\r\n            <Route exact path ='/StudentAdmin' component={StudentAdmin} />\r\n            <Route exact path ='/login' component={props.title} />\r\n        </Switch>\r\n  </main>\r\n    )\r\n}\r\n\r\nexport default withRouter(Home);","import React from 'react';\r\nimport { Redirect, Route } from \"react-router-dom\";\r\nimport { ACCESS_TOKEN_NAME } from '../constants/apiConstants';\r\nfunction PrivateRoute({ children, ...rest }) {\r\n\r\n  console.log('children', children)\r\n  console.log('...rest', rest)\r\n    return (\r\n      <Route\r\n        {...rest}\r\n        render={({ location }) =>\r\n          localStorage.getItem(ACCESS_TOKEN_NAME) ? (\r\n            children\r\n          ) : (\r\n            <Redirect\r\n              to={{\r\n                pathname: \"/login\",\r\n                state: { from: location }\r\n              }}\r\n            />\r\n          )\r\n        }\r\n      />\r\n    );\r\n  }\r\n\r\nexport default PrivateRoute;","import React, {useState} from 'react';\r\nimport './App.css';\r\nimport Header from './components/Header/Header';\r\nimport LoginForm from './components/LoginForm/LoginForm';\r\nimport Home from './components/Home/Home';\r\nimport PrivateRoute from './utils/PrivateRoute';\r\nimport {\r\n  BrowserRouter as Router,\r\n  Switch,\r\n  Route\r\n} from \"react-router-dom\";\r\n\r\nimport {UserContext} from \"./Context/GVar\"\r\nimport SchoolAdmin from './components/Admin/SchoolAdmin';\r\nimport StudentAdmin from './components/Admin/StudentAdmin';\r\n\r\nconst  App = () =>{\r\n  const [title, updateTitle] = useState(null);\r\n  const [errorMessage, updateErrorMessage] = useState(null);\r\n\r\n  let [fileHash, setFileHash] = useState(0x0)\r\n  let [web3, setWeb3] = useState({web3:1})\r\n  let [contract, setContract] = useState({contract:2})\r\n  let [account, setAccount] = useState(0)\r\n  let [studentId, setStudentId ]=  useState(0)\r\n\r\n\r\n  return (\r\n    <Router>\r\n    <div className=\"App\">\r\n      <Header title={title}/>\r\n        <div className=\"container d-flex align-items-center flex-column\">\r\n          <Switch>\r\n              <UserContext.Provider value={{fileHash, setFileHash, web3, setWeb3, \r\n                contract, setContract, account, setAccount, studentId, setStudentId}}>\r\n                    <Route path=\"/login\">\r\n                      <LoginForm showError={updateErrorMessage} updateTitle={updateTitle}/>\r\n                    </Route>\r\n                    <PrivateRoute path=\"/home\">\r\n                      <Home />\r\n                    </PrivateRoute>\r\n                    <PrivateRoute path=\"/schooladmin\">\r\n                      <SchoolAdmin />\r\n                    </PrivateRoute>\r\n                    <PrivateRoute path=\"/studentadmin\">\r\n                      <StudentAdmin />\r\n                    </PrivateRoute>\r\n\r\n              </UserContext.Provider>\r\n          </Switch>\r\n        </div>\r\n    </div>\r\n    </Router>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport {BrowserRouter} from 'react-router-dom';\nimport 'bootstrap/dist/css/bootstrap.css'\nimport App from './App';\n\n\nReactDOM.render(\n    <React.StrictMode>\n        <BrowserRouter>\n            <App  />\n        </BrowserRouter>\n    </React.StrictMode>,\n    document.getElementById('root')\n);\n\n","import React, { useState,useContext, useEffect} from 'react';\r\nimport '../../App.css';\r\nimport {UserContext} from '../../Context/GVar.js';\r\nimport {API_BASE_URL, ACCESS_TOKEN_NAME} from '../../constants/apiConstants';\r\nimport ISA from '../../abis/ISA.json'\r\nimport Web3 from 'web3'\r\n\r\nconst SchoolAdmin = () => {\r\n    let {fileHash, setFileHash} = useContext(UserContext)\r\n    let {web3} = useContext(UserContext)\r\n    let {account} = useContext(UserContext)\r\n    let {contract} = useContext(UserContext)\r\n\r\n  //local states\r\n    let [fh, setFH] = useState(0x0)        // fileHash\r\n    let [cert, setCert]  = useState(\"---\")     // certified if correct copy\r\n    let [acct, setAcct] = useState()        // account\r\n    let [amountRemain, setAmountR] = useState(0);    //how much more to pay\r\n    let [monthsRemain, setMonthsR] = useState(0);    // how many more months to go\r\n\r\n    const ipfsClient = require ('ipfs-http-client')\r\n    const ipfs = ipfsClient({ host: 'ipfs.infura.io', port:5001,protocol:'https', apiPath:'/api/v0'})\r\n\r\n    // for IPFS\r\n    let [buffer, setbuffer] = useState('')\r\n\r\n    // Capture file selected, converted into machine format\r\n    const captureFile = (event) => {      \r\n        event.preventDefault()            \r\n        const file = event.target.files[0]\r\n        const reader = new window.FileReader()\r\n        reader.readAsArrayBuffer(file)\r\n        reader.onloadend = ()=> {\r\n            setbuffer(buffer=>buffer=Buffer(reader.result))\r\n        }   // note: outside this function, reader.result is null!!!\r\n      }\r\n\r\n    //Store ISA document into IPFS and get a fileHash\r\n    const AddtoIPFS = async (event) => {\r\n        event.preventDefault()\r\n            await ipfs.add(buffer,  (error, result) => {\r\n            fh =   result[0].hash\r\n            console.log ('fHash at IPFS  ', fh)\r\n            if(error){\r\n                console.error(error)\r\n            }\r\n        })\r\n    }\r\n\r\n    // listen to change of metamask account \r\n    useEffect(() => {\r\n        async function listenMMAccount() {\r\n        window.ethereum.on(\"accountsChanged\", async function() {\r\n            if(web3.web3 !== 1) {    // already initiated Web3 & Blockchain connection\r\n                await loadBlockChain()\r\n            } \r\n        });\r\n        }\r\n        listenMMAccount();\r\n    }, []); \r\n\r\n    // const loadBlockChain =  async (event) => {\r\n    const loadBlockChain =  async () => {\r\n        // event.preventDefault()\r\n        let ethereum = window.ethereum;\r\n        // w3 = window.web3;\r\n        web3 = window.web3;\r\n        console.log(\"w3--- \",  web3)\r\n        if (typeof ethereum !== 'undefined') {\r\n            await ethereum.enable();\r\n            web3 = new Web3(ethereum)\r\n            const accounts = await web3.eth.getAccounts()\r\n            account = accounts[0]\r\n            const networkId = await web3.eth.net.getId()\r\n            const networkData = ISA.networks[networkId]\r\n            if(networkData){\r\n              const abi = ISA.abi\r\n              const address = networkData.address\r\n            contract = await new web3.eth.Contract(abi,address)\r\n              console.log('contract===  ', contract)\r\n            } else {\r\n              window.alert('smart contract not deployed to the detected network')\r\n            }\r\n        } else if (typeof web3 !== 'undefined') {\r\n            web3 =  Web3(web3.currentProvider)\r\n          } else {\r\n              web3 = new Web3(new Web3.providers.HttpProvider(process.env.WEB3_PROVIDER))\r\n            }\r\n      }\r\n\r\n    const StoreStudentInfo = async () => {\r\n        // event.preventdefault()\r\n\r\n        await loadBlockChain()\r\n        console.log(web3, contract, account)\r\n        // console.log(w3, cont, acct)\r\n        await contract.methods.storeStudentInfo(account,fileHash).send({from:account})\r\n        // let msg = await contract.methods.storeStudentInfo(account).send({from:account})\r\n        // console.log('after SC  ', msg)\r\n        // contract.events.LogAdditionEvent({})\r\n        // .on('data', event=> console.log(event));\r\n\r\n        // let et = await new Promise(resolve=> setTimeout(()=>resolve, 2000));\r\n        // console.log(et)\r\n    }\r\n\r\n    const StorePaymentTerms = async (e) => {\r\n        e.preventDefault()\r\n        await loadBlockChain()\r\n        console.log(account, contract)\r\n        console.log(amountRemain,monthsRemain)\r\n        await contract.methods.StorePaymentDetails(account,amountRemain,monthsRemain).send({from:account})\r\n     }\r\n\r\n    const RetrieveStudentInfo = async () => {\r\n        // event.preventdefault()\r\n        await loadBlockChain()\r\n        // await contract.methods.getStudentInfo(account).call().then((result)=>\r\n        //      console.log('after SC result ', result))\r\n        console.log(\"account -- \", account)\r\n        let data = await contract.methods.getStudentInfo(account).call()\r\n        let key=1\r\n        setAcct(acct=>acct=data[key])\r\n        key = 2\r\n        setFH(fh=>fh=data[key])\r\n        setFileHash(fileHash=>fileHash=fh)\r\n        console.log(\"retrieve info data1\", data[1])\r\n        console.log(\"retrieve info acct\", acct)\r\n        console.log(\"retrieve info fh\", fh)\r\n        console.log(\"retrieve info fileHash\", fileHash)\r\n    }\r\n\r\n    const VerifySignature = async (event) => {\r\n        event.preventDefault()\r\n        // await loadBlockChain()\r\n        await RetrieveStudentInfo()\r\n        console.log('before verifying', account, contract,fileHash)\r\n        let Certified = await contract.methods.verifyFileHash(account,fileHash).call()\r\n        console.log('certified ', Certified)\r\n        setCert(cert=>cert=\"\")   \r\n        if (Certified>0){\r\n            setCert(cert=>cert=1)    \r\n            console.log('inside certified')\r\n            // setCert(1)    \r\n        } else {setCert(cert=>cert=0)    }\r\n        console.log('cert ', cert)\r\n        \r\n    }\r\n\r\n    const handleInputChange = (e) => {\r\n        e.preventDefault()\r\n        if (e.target.name === \"amount\"){\r\n            setAmountR(e.target.value)\r\n            console.log('amountR `` ',amountRemain)    \r\n        } else {\r\n            setMonthsR(e.target.value)\r\n            console.log('amountR `` ',monthsRemain)\r\n    \r\n        }\r\n\r\n    }\r\n\r\n    function handleLogout() {\r\n        localStorage.removeItem(ACCESS_TOKEN_NAME)\r\n        // history.pushState({pathname: '/login'})\r\n        // props.history.push('/login')\r\n    }\r\n\r\n    return(\r\n\r\n    // <div className=\"grid-container\">\r\n    <wrapper>\r\n        <article>\r\n            Load ISA Document \r\n            <form onSubmit={AddtoIPFS}>\r\n                <input type='file'  onChange={captureFile} />\r\n                <input type='submit'  value='Store into IPFS' /> \r\n            </form>      \r\n        </article>\r\n        <article>        \r\n            <button onClick={StoreStudentInfo}>Create New Student Account</button>\r\n        </article>\r\n        \r\n        <article>        \r\n            <button onClick={RetrieveStudentInfo}>Retrieve Account</button>\r\n            <p>Student address: {acct}</p>\r\n        </article>\r\n        \r\n        <article>        \r\n            <form onSubmit={StorePaymentTerms}>\r\n                <label> Store Payment Details\r\n                    <input type='text' name=\"amount\" placeholder= \"5000\" onChange={handleInputChange} />\r\n                    <input type='text' name=\"months\" placeholder=\"60\" onChange={handleInputChange} />\r\n                </label>\r\n                <input type='submit' value=\"Submit\" />\r\n            </form>\r\n        </article>\r\n        \r\n        <footer>        \r\n            <button onClick={VerifySignature}>Verify Signature</button>\r\n            <p>Verification: {cert}</p>   \r\n            {/* <p>Verification: {{cert}?\"OK\":\"FAIL!\"}</p> */}\r\n        </footer>\r\n            <div className=\"ml-auto\">\r\n                    <button className=\"btn btn-danger\" onClick={() => handleLogout()}>Logout</button>\r\n            </div>\r\n\r\n    </wrapper>\r\n    )\r\n}\r\n\r\nexport default SchoolAdmin","export const API_BASE_URL = process.env.REACT_APP_SERVER_URL;\r\nexport const ACCESS_TOKEN_NAME = 'login_access_token';","import { createContext } from 'react';\r\n\r\nexport const  UserContext = createContext();\r\n\r\n"],"sourceRoot":""}